<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gear Reservation – fiducia collective</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-shell">
    <header>
      <div class="logo-wrap">
        <div class="logo-mark"><span></span></div>
        <div class="logo-text">
          <div class="logo-text-main">FIDUCIA COLLECTIVE</div>
          <div class="logo-text-sub">Gear · Schedule · Responsibility</div>
        </div>
      </div>
      <nav>
        <a href="index.html">HOME</a>
        <a href="equipment.html" class="active">GEAR</a>
        <a href="ai-stillcut.html">AI STILLCUT</a>
      </nav>
    </header>

    <section class="hero">
      <div class="hero-inner">
        <div class="hero-pill">
          <span class="hero-pill-dot"></span>
          FX3 · 짐벌 · 조명 · Car 옵션
        </div>
        <h1 class="hero-title">
          “장비는 fiducia에서 온다.”<br />
          라고 말할 수 있게 만드는 예약 폼.
        </h1>
        <p class="hero-desc">
          현장에서 이미 검증된 셋업들만 정리해 둔 Gear Reservation입니다.  
          어떤 프로젝트인지, 언제 찍는지만 명확하면 나머지는 fiducia가 챙깁니다.
        </p>
        <div class="hero-meta">
          <span>SONY FX3 기반 1인/2인 촬영 세트</span>
          <span>Gear Reservation Notion DB 연동</span>
        </div>
      </div>
    </section>

    <main>
      <section class="card">
        <div class="card-header">
          <div>
            <div class="card-title">장비 예약 폼</div>
            <div class="card-sub">
              프로젝트 이름과 촬영 날짜만 정확히 적어주면, 나머지는 여기서 정리됩니다.
            </div>
          </div>
        </div>

        <div class="form-meta-grid" style="margin-bottom: 14px;">
          <div class="form-meta-item">
            <span class="label">예시 패키지</span>
            <span class="value">FX3 + 24–105 + 짐벌 + 1-Light + 무선 마이크</span>
          </div>
          <div class="form-meta-item">
            <span class="label">운영 방식</span>
            <span class="value">1인 촬영 / 2~3인 팀 촬영 모두 대응</span>
          </div>
        </div>

        <form id="equip-form">
          <div class="input-group">
            <label>프로젝트명 (ProjectName)</label>
            <input
              id="ProjectName"
              placeholder="예: 브랜드 필름 / 웨딩 / 패션 룩북 / MV"
            />
          </div>

          <div class="form-two-cols">
            <div class="input-group">
              <label>대여자 이름 (RenterName)</label>
              <input id="RenterName" placeholder="예: 홍길동" />
            </div>

            <div class="input-group">
              <label>연락처 (Contact)</label>
              <input id="Contact" placeholder="010-0000-0000" />
            </div>
          </div>

          <div class="input-group">
            <label>장비 구성 (Gear)</label>
            <input
              id="Gear"
              placeholder="예: FX3 + 짐벌 + 조명 2개 + 무선 마이크"
            />
          </div>

          <div class="form-two-cols">
            <div class="input-group">
              <label>촬영 날짜 (Date)</label>
              <input id="Date" type="date" />
            </div>
            <div class="input-group">
              <label>상태(Status)는 노션에서 직접 관리</label>
              <input
                disabled
                value="Status / AutoCreated는 시스템에서 자동 관리"
              />
            </div>
          </div>

          <div class="input-group">
            <label>메모 (Memo)</label>
            <textarea
              id="Memo"
              placeholder="픽업/반납 시간, 차량, 촬영 장소, 특이사항 등을 적어주세요."
            ></textarea>
          </div>

          <button type="button" id="equip-submit">장비 예약하기</button>
          <p class="footer-note">
            제출 시 Notion의 Gear Reservation DB에 바로 기록됩니다.  
            스케줄이 겹치거나 조정이 필요한 경우, 별도로 연락을 드립니다.
          </p>
        </form>
      </section>
    </main>
  </div>

  <script>
    document
      .getElementById("equip-submit")
      .addEventListener("click", async () => {
        const body = {
          Title: "Gear Reservation",
          ProjectName: ProjectName.value,
          RenterName: RenterName.value,
          Contact: Contact.value,
          Gear: Gear.value,
          Date: Date.value,
          Memo: Memo.value,
        };

        if (!body.ProjectName || !body.RenterName || !body.Contact) {
          alert("프로젝트명 / 대여자 / 연락처는 꼭 입력해 주세요.");
          return;
        }

        try {
          const res = await fetch("/.netlify/functions/equipment-reserve", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(body),
          });

          const json = await res.json();
          if (json.ok) {
            alert("장비 예약이 접수되었습니다. 노션에서 바로 확인할 수 있어요.");
            document.getElementById("equip-form").reset();
          } else {
            alert("서버에서 오류가 났습니다. 잠시 후 다시 시도해 주세요.");
          }
        } catch (e) {
          console.error(e);
          alert("연결에 문제가 있습니다. 인터넷이나 서버 상태를 확인해 주세요.");
        }
      });
  </script>
</body>
</html>