<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Stillcut 예약 – fiducia collective</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-shell">
    <header>
      <div class="logo-wrap">
        <div class="logo-mark"><span></span></div>
        <div class="logo-text">
          <div class="logo-text-main">FIDUCIA COLLECTIVE</div>
          <div class="logo-text-sub">AI STILLCUT · 스타일 프리뷰 예약</div>
        </div>
      </div>
      <nav>
        <a href="index.html">HOME</a>
        <a href="equipment.html">GEAR</a>
        <a href="ai-stillcut.html" class="active">AI STILLCUT</a>
      </nav>

      <!-- 스틸컷 서브 네비 -->
      <div class="subnav">
        <button class="subnav-button active" data-scroll="#stillcut-reserve">
          바로 예약하기
        </button>
        <button class="subnav-button" data-link="ai-stillcut-result.html">
          AI 스틸컷 확인하기
        </button>
      </div>
    </header>

    <section class="hero">
      <div class="hero-inner">
        <div class="hero-pill">
          <span class="hero-pill-dot"></span>
          AI 스틸컷 신청 / 예약 폼
        </div>
        <h1 class="hero-title">
          촬영 전에,<br />
          우리 영상의 “한 장면”을 먼저 보는 예약.
        </h1>
        <p class="hero-desc">
          이 폼은 <strong>AI 스틸컷 제작 + 감독/장비/샷팅 추천</strong>을 예약하는 창구입니다.<br />
          제출 후, 결과 화면에서 추천 감독 / 추천 장비 / 추천 샷팅 / 예상 스틸컷 / 예상 가격을 확인할 수 있어요.
        </p>
        <div class="hero-meta">
          <span>1) 프로젝트 정보 입력</span>
          <span>2) 레퍼런스 & 무드 공유</span>
          <span>3) 결과 화면에서 제안 확인</span>
        </div>
      </div>
    </section>

    <main>
      <section class="card" id="stillcut-reserve">
        <div class="card-header">
          <div>
            <div class="card-title">AI 스틸컷 예약 폼</div>
            <div class="card-sub">
              최대한 솔직하게 적을수록, 결과물이 현실에 가까워집니다.
            </div>
          </div>
        </div>

        <form id="ai-form">
          <div class="input-group">
            <label>프로젝트 제목 (Project Title)</label>
            <input
              id="ProjectTitle"
              placeholder="예: 브랜드 필름 / 앨범 티저 / 룩북 / 웨딩 필름"
            />
          </div>

          <div class="form-two-cols">
            <div class="input-group">
              <label>전화번호 (Phone)</label>
              <input id="Phone" placeholder="010-0000-0000" />
            </div>
            <div class="input-group">
              <label>이메일 (Email)</label>
              <input id="Email" placeholder="email@domain.com" />
            </div>
          </div>

          <div class="form-two-cols">
            <div class="input-group">
              <label>Video Type</label>
              <input
                id="VideoType"
                placeholder="예: 브랜딩 / 웨딩 / 패션 / MV / 다큐"
              />
            </div>
            <div class="input-group">
              <label>러닝타임 (Runtime)</label>
              <input id="Runtime" placeholder="예: 30초 / 1분 / 3분" />
            </div>
          </div>

          <div class="form-two-cols">
            <div class="input-group">
              <label>예산 (Budget)</label>
              <input id="Budget" placeholder="예: 300~500만 원 / 미정" />
            </div>
            <div class="input-group">
              <label>예상 촬영일 (Shoot Date)</label>
              <input id="ShootDate" type="date" />
            </div>
          </div>

          <div class="form-two-cols">
            <div class="input-group">
              <label>촬영 지역 (Location)</label>
              <input id="Location" placeholder="예: 서울 성수 / 부산 해운대 / 해외" />
            </div>
            <div class="input-group">
              <label>Reference Link</label>
              <input
                id="ReferenceLink"
                placeholder="YouTube / Pinterest / 이미지 링크 등 무드 레퍼런스"
              />
            </div>
          </div>

          <div class="input-group">
            <label>스타일 / 무드 설명 (Message)</label>
            <textarea
              id="Message"
              placeholder="예: A24 느낌, 필름 톤, 인물 위주, 네온/야간, 자연광만, 다큐처럼 담담하게 등 마음껏 적어주세요."
            ></textarea>
          </div>

          <button type="button" id="ai-submit">AI 스틸컷 예약 + 결과 보기</button>
          <p class="footer-note">
            제출 시 Notion DB에 기록되고, 바로 이어지는 결과 화면에서 AI 기반 추천 결과를 확인할 수 있습니다.
          </p>
        </form>
      </section>
    </main>
  </div>

  <script>
    // 서브 네비 동작
    document.querySelectorAll(".subnav-button").forEach((btn) => {
      btn.addEventListener("click", () => {
        const link = btn.dataset.link;
        const scroll = btn.dataset.scroll;

        document
          .querySelectorAll(".subnav-button")
          .forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");

        if (link) {
          window.location.href = link;
        } else if (scroll) {
          const el = document.querySelector(scroll);
          if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    });

    // 폼 전송
    document.getElementById("ai-submit").addEventListener("click", async () => {
      const body = {
        Title: "AI Stillcut Request",
        ProjectTitle: ProjectTitle.value,
        Phone: Phone.value,
        Email: Email.value,
        VideoType: VideoType.value,
        Runtime: Runtime.value,
        Budget: Budget.value,
        ShootDate: ShootDate.value,
        Location: Location.value,
        ReferenceLink: ReferenceLink.value,
        Message: Message.value,
      };

      if (!body.ProjectTitle || !body.Email) {
        alert("프로젝트 제목과 이메일은 꼭 적어주세요.");
        return;
      }

      try {
        const res = await fetch("/.netlify/functions/ai-stillcut-request", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(body),
        });

        const json = await res.json();
        if (!json.ok) {
          alert("서버 오류: " + (json.error || ""));
          return;
        }

        localStorage.setItem("fiducia_ai_request", JSON.stringify(body));
        window.location.href = "ai-stillcut-result.html";
      } catch (e) {
        console.error(e);
        alert("연결에 문제가 있습니다. 잠시 후 다시 시도해 주세요.");
      }
    });
  </script>
</body>
</html>